{"version":3,"sources":["api.js","JsonApi.js","TopBar/TopBar.js","ServerPanel/ServerPanel.js","App.js","index.js"],"names":["ApiProvider","switchServer","number","this","server","_server","fetchMethod","name","reason","postJsonMethod","time","toString","team","getJsonMethod","isWorking","user","getUserInfo","window","location","constructApiUrl","method","params","paramStr","s","fetch","credentials","result","options","body","JSON","stringify","headers","postMethod","then","json","error","defaultUser","discord","discriminator","avatar","auth","is_signed_in","is_admin","response","hasOwnProperty","OperationsApi","React","createContext","TopBar","state","ready","api","context","u","setState","className","Fragment","region","to","href","onClick","e","preventDefault","logout","_","openLoginPage","Component","contextType","AdminTools","status","msg","type","popup","is","nickname","kickPlayer","bind","banPlayer","giveVip","inputNickname","movePlayer","Promise","resolve","reject","submit","chancel","ev","description","title","checkError","finally","console","log","side","prompt","updateStatus","confirm","addVip","target","value","props","placeholder","onChange","disabled","Status","text","PopUp","ServerPanel","BanList","list","getBanList","l","useState","setReason","onSubmit","for","id","BanTime","change","selected","App","Provider","path","exact","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ba5809d7.chunk.js","sourcesContent":["import React from \"react\";\nimport JsonClient from \"./JsonApi\";\n\nexport class ApiProvider extends JsonClient {\n  constructor() {\n    super();\n    this.switchServer(\"1\");\n  }\n  switchServer(number) {\n    this.server = \"Community Operations #\" + number;\n    this._server = \"Community Operations %23\" + number;\n  }\n  logout() {\n    return this.fetchMethod(\"logout\");\n  }\n  kickPlayer(name, reason) {\n    return this.postJsonMethod(\"changeplayer\", { \"request\": \"kickPlayer\", \"playername\": name, \"servername\": this.server, \"reason\": reason });\n  }\n  banPlayer(name, reason, time) {\n    return this.postJsonMethod(\"changeserver\", { \"request\": \"addServerBan\", \"playername\": name, \"servername\": this.server, \"bantime\": time.toString(), \"reason\": reason });\n  }\n  addVip(name) {\n    return this.postJsonMethod(\"changeserver\", { \"request\": \"addServerVip\", \"playername\": name, \"servername\": this._server });\n  }\n  movePlayer(team, name) {\n    return this.postJsonMethod(\"moveplayer\", { \"teamid\": team, \"playername\": name, \"servername\": this._server });\n  }\n  getBanList() {\n    return this.getJsonMethod(\"infolist\", { \"type\": \"bannedList\", \"servername\": this._server });\n  }\n  getLogs() {\n    return this.getJsonMethod(\"taillog\");\n  }\n}\n\nexport const OperationsApi = React.createContext();\n","\nexport default class JsonClient {\n  constructor() {\n    this.isWorking = true;\n    this.user = this.getUserInfo();\n  }\n  openLoginPage() {\n    window.location = this.constructApiUrl(\"login\");\n  }\n  constructApiUrl(method, params) {\n    params = params || {};\n    let paramStr = \"\";\n    for (let s in params) {\n      paramStr += s + \"=\" + params[s] + \"&\";\n    }\n    const apiEP = \"https://operations.bandofbrothers.site/api/\";\n    return apiEP + method + \"?\" + paramStr;\n  }\n  async fetchMethod(method, params) {\n    let result = await fetch(this.constructApiUrl(method, params), {\n      credentials: \"include\"\n    });\n    return result;\n  }\n  async postMethod(method, params) {\n    let result = await fetch(this.constructApiUrl(method, {}), params);\n    return result;\n  }\n  async postJsonMethod(method, params) {\n    const options = {\n      method: 'POST',\n      body: JSON.stringify(params),\n      credentials: \"include\",\n      headers: {\n          'Content-Type': 'application/json'\n      }\n    };\n    return await this.postMethod(method, options).then(result => {\n      return result.json().then(json => json, error => ({ \"error\": error }));\n    }, error => ({ \"error\": error }));\n  }\n  async getJsonMethod(method, params) {\n    return await this.fetchMethod(method, params).then(result => {\n      return result.json().then(json => json, error => ({ \"error\": error }));\n    }, error => ({ \"error\": error }));\n  }\n  async getUserInfo() {\n    const defaultUser = {\n      discord: {\n        name: \"\",\n        discriminator: 0,\n        avatar: \"\"\n      },\n      auth: {\n        is_signed_in: false,\n        is_admin: false\n      }\n    };\n    let response = await this.getJsonMethod(\"getinfo\");\n    if (!response.hasOwnProperty(\"error\")) {\n      return response;\n    }\n    return defaultUser;\n  }\n}","import React, { Component } from 'react';\nimport \"./TopBar.css\";\n\nimport { Link } from 'react-router-dom';\nimport { OperationsApi } from \"../api\";\n\nexport default class TopBar extends Component {\n  static contextType = OperationsApi;\n  state = { ready: false };\n  render() {\n    let api = this.context;\n    api.user.then((u) => (!this.state.ready) ? this.setState({ready: true, user: u}) : null);\n\n\n    return (\n      <div className=\"topbar\">\n        <h1 className=\"title\">Community Network</h1>\n        {\n          (this.state.ready && this.state.user.auth.is_signed_in) ?\n          (\n            <React.Fragment>\n              {(this.state.user.auth.region == \"EU\" || this.state.user.auth.region == \"ALL\") ? <Link to=\"/s1/\" className=\"link\">Server #1</Link> : \"\"}\n              {(this.state.user.auth.region == \"NA\" || this.state.user.auth.region == \"ALL\") ? <Link to=\"/s2/\" className=\"link\">Server #2</Link> : \"\"}\n              <a href=\"#logout-attempt\" className=\"link\" onClick={\n                (e) => {\n                  e.preventDefault();\n                  api.logout().then(_ => {\n                    window.location = \"/\";\n                  });\n                }\n              }>Logout</a>\n            </React.Fragment>\n          ) : (\n            <a href=\"#login-attempt\" className=\"link\" onClick={\n              (e) => {\n                e.preventDefault();\n                api.openLoginPage();\n              }\n            }>Login</a>\n          )\n        }\n      </div>\n    );\n\n\n  }\n\n}\n","import React, { Component, useState } from 'react';\nimport \"./ServerPanel.css\";\n\nimport { OperationsApi } from \"../api\";\n\nclass AdminTools extends Component {\n  static contextType = OperationsApi;\n\n  state = { ready: false, status: { msg: \"\", type: \"\" }, popup: { is: false } };\n  nickname = \"\";\n\n  kickPlayer = this.kickPlayer.bind(this);\n  banPlayer = this.banPlayer.bind(this);\n  giveVip = this.giveVip.bind(this);\n  inputNickname = this.inputNickname.bind(this);\n  movePlayer = this.movePlayer.bind(this);\n\n  kickPlayer() {\n    // Load API\n    let api = this.context;\n    // If no nickname, return\n    if (this.nickname === \"\") return;\n\n    var promise = new Promise((resolve, reject) => {\n      var submit = (reason, time) => {\n        resolve(reason);\n      };\n      var chancel = (ev) => {\n        ev.preventDefault();\n        reject(\"Chanceled\");\n      };\n      this.setState(\n        s => ({\n          ...s,\n          status: { msg: \"Executing\", type: \"warn\" },\n          popup: { is: true, description: \"Enter a reason to kick.\", title: \"Kick \" + this.nickname, submit: submit, chancel: chancel }\n        })\n      );\n    });\n\n    promise.then(\n      (reason) => api.kickPlayer(this.nickname, reason || \"\")\n        .then(result => this.checkError(result)),\n      (e) => {}\n    ).finally(_ => this.setState(\n      s => ({\n        ...s,\n        popup: { is: false }\n      })\n    ));\n\n  }\n  banPlayer() {\n    let api = this.context;\n    if (this.nickname === \"\") return;\n\n    var promise = new Promise((resolve, reject) => {\n      var submit = (reason, time) => {\n        console.log(time);\n        resolve({reason, time});\n      };\n      var chancel = (ev) => {\n        ev.preventDefault();\n        reject(\"Chanceled\");\n      };\n      this.setState(\n        s => ({\n          ...s,\n          status: { msg: \"Executing\", type: \"warn\" },\n          popup: { is: true, description: \"Enter a reason to ban.\", title: \"Ban \" + this.nickname, submit: submit, chancel: chancel, time: true }\n        })\n      );\n    });\n\n    promise.then(\n      ({reason, time}) => api.banPlayer(this.nickname, reason, time)\n        .then(result => this.checkError(result)),\n      (e) => {}\n    ).finally(_ => this.setState(\n      s => ({\n        ...s,\n        popup: { is: false }\n      })\n    ));\n\n  }\n  movePlayer() {\n    let api = this.context;\n    if (this.nickname === \"\") return;\n    var side = window.prompt(\"Please, enter side (1 or 2)\", \"1\");\n    if (side === \"1\" || side === \"2\") {\n        this.updateStatus({ msg: \"Executing\", type: \"warn\" });\n        api.movePlayer(side, this.nickname).then(result => this.checkError(result));\n    }\n  }\n  giveVip() {\n    let api = this.context;\n    if (this.nickname === \"\") return;\n    let state = window.confirm(\"Give Vip to \" + this.nickname + \"?\");\n    if (state) {\n        this.updateStatus({ msg: \"Executing\", type: \"warn\" });\n        let result = api.addVip(this.nickname).then(result => this.checkError(result));\n    }\n  }\n  inputNickname(ev) {\n    this.nickname = ev.target.value;\n  }\n  checkError(result) {\n    if (!result) {\n        this.updateStatus(\"Api currently not working.\");\n    } else if (result.hasOwnProperty(\"error\")) {\n        this.updateStatus({ msg: result.error, type: \"error\" });\n    } else {\n        this.updateStatus({ msg: JSON.stringify(result,null,'\\t'), type: \"good\" });\n    }\n  }\n  updateStatus(status) {\n    this.setState(\n      s => ({ ...s, status: status })\n    );\n  }\n  render() {\n    let api = this.context;\n\n\n    if (!this.state.ready) {\n        api.switchServer(this.props.server);\n        api.user.then(\n          u => (!this.state.ready) ? this.setState(\n            s => ({ ...s, ready: true, user: u })\n          ) : null\n        );\n        return \"Loading..\";\n    }\n    if (this.state.user.auth.is_admin) {\n        return (\n        <React.Fragment>\n          <div className=\"sectiontitle\">\n            Admin tools - Server #{this.props.server}\n          </div>\n          <div className=\"serverpanel\">\n            <input type=\"text\" placeholder=\"Nickname\" onChange={this.inputNickname} />\n            <input type=\"button\" value=\"Ban\" onClick={this.banPlayer} />\n            <input type=\"button\" value=\"Kick\" onClick={this.kickPlayer} />\n            <input type=\"button\" value=\"Move\" onClick={this.movePlayer} />\n            <input type=\"button\" value=\"Give Vip\" onClick={this.giveVip} title=\"Function is disabled as it may cause issues.\" disabled />\n          </div>\n          <div className=\"statusbar\">\n            <Status text={this.state.status.msg.toString()} type={this.state.status.type} />\n          </div>\n          {(this.state.popup.is) ? <PopUp title={this.state.popup.title} description={this.state.popup.description} time={this.state.popup.time} submit={this.state.popup.submit} chancel={this.state.popup.chancel} />  : \"\"}\n         </React.Fragment>\n        )\n    } else if(!this.state.user.is_signed_in) {\n        api.openLoginPage();\n    } else {\n      return \"No premissions.\";\n    }\n  }\n}\nexport default class ServerPanel extends Component {\n  static contextType = OperationsApi;\n  render() {\n    return (\n      <React.Fragment>\n        <AdminTools server={this.props.server} />\n        <BanList />\n      </React.Fragment>\n    );\n  }\n\n}\nclass BanList extends Component {\n  static contextType = OperationsApi;\n  state = {ready: false, list: []}\n  render() {\n    let api = this.context;\n    if(!this.state.ready){\n      api.getBanList().then(l => this.setState({ ready: true, list: l}));\n      return \"Loading..\";\n    } else {\n    console.log(this.state);\n      return (<div>\n\n      </div>);\n    }\n  }\n}\n\nfunction Status(props) {\n  return (\n    <div className={\"status \" + props.type}>\n    {props.text}\n    </div>\n  );\n }\n\n function PopUp(props) {\n  const [reason, setReason] = React.useState(\"\");\n  var time = \"0\";\n\n  return (\n    <div className=\"popup\">\n      <form onSubmit={ (ev) => { ev.preventDefault(); console.log(time); props.submit(reason, time); } }>\n        <h3>{props.title}</h3>\n        <p>{props.description}</p>\n        <label for=\"reason\">Enter reason:</label>\n        <input type=\"text\" id=\"reason\" name=\"reason\" onChange={(e) => setReason(e.target.value)} />\n        {(props.time) ? <BanTime change={(e) => {time = e.target.value;} } /> : \"\" }\n        <input type=\"button\" value=\"Chancel\" onClick={props.chancel} />\n        <input type=\"submit\" value=\"Submit\" />\n      </form>\n    </div>\n  );\n }\n\n function BanTime(props) {\n  return (\n    <div>\n      <label for=\"time\">Choose a ban time:</label>\n      <select id=\"time\" name=\"time\" onChange={props.change}>\n        <option value=\"0\" selected>Perm</option>\n        <option value=\"1\">1 day</option>\n        <option value=\"2\">2 days</option>\n        <option value=\"7\">1 week</option>\n      </select>\n    </div>\n  );\n }\n\n\n\n","import './App.css';\n\nimport TopBar from \"./TopBar/TopBar.js\";\nimport ServerPanel from \"./ServerPanel/ServerPanel.js\";\n\nimport { OperationsApi, ApiProvider } from \"./api\";\nimport { BrowserRouter, Route } from 'react-router-dom'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n    <BrowserRouter>\n       <OperationsApi.Provider value={new ApiProvider()}>\n          <TopBar />\n          <Route path=\"/\" exact >\n          </Route>\n          <Route path=\"/s1/\">\n            <ServerPanel server=\"1\" />\n          </Route>\n          <Route path=\"/s2/\">\n            <ServerPanel server=\"2\" />\n          </Route>\n       </OperationsApi.Provider>\n    </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}