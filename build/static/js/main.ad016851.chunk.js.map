{"version":3,"sources":["api.js","JsonApi.js","TopBar/TopBar.js","ServerPanel/ServerPanel.js","App.js","index.js"],"names":["ApiProvider","switchServer","number","this","server","_server","fetchMethod","name","reason","postJsonMethod","time","toString","team","getJsonMethod","encodeURIComponent","isWorking","user","getUserInfo","window","location","constructApiUrl","method","params","paramStr","s","fetch","credentials","result","options","body","JSON","stringify","headers","postMethod","then","json","error","defaultUser","discord","discriminator","avatar","auth","is_signed_in","is_admin","response","hasOwnProperty","OperationsApi","React","createContext","TopBar","state","ready","api","context","u","setState","className","Fragment","region","to","href","onClick","e","preventDefault","logout","_","openLoginPage","Component","contextType","AdminTools","status","msg","type","popup","is","choose","nickname","kickPlayer","bind","banPlayer","giveVip","inputNickname","movePlayer","Promise","resolve","reject","submit","chancel","ev","description","title","checkError","finally","console","log","attack","defend","side","confirm","updateStatus","addVip","target","value","props","placeholder","onChange","disabled","Status","text","PopUp","ChooseSide","ServerPanel","BanList","list","players","map","j","i","BannedPlayer","player","getBanList","l","useState","setReason","onSubmit","for","id","BanTime","change","selected","displayName","admin","banned_until","ban_timestamp","App","Provider","path","exact","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ad016851.chunk.js","sourcesContent":["import React from \"react\";\nimport JsonClient from \"./JsonApi\";\n\nexport class ApiProvider extends JsonClient {\n  constructor() {\n    super();\n    this.switchServer(\"1\");\n  }\n  switchServer(number) {\n    this.server = \"Community Operations #\" + number;\n    this._server = \"Community Operations %23\" + number;\n  }\n  logout() {\n    return this.fetchMethod(\"logout\");\n  }\n  kickPlayer(name, reason) {\n    return this.postJsonMethod(\"changeplayer\", { \"request\": \"kickPlayer\", \"playername\": name, \"servername\": this.server, \"reason\": reason });\n  }\n  banPlayer(name, reason, time) {\n    return this.postJsonMethod(\"changeserver\", { \"request\": \"addServerBan\", \"playername\": name, \"servername\": this.server, \"bantime\": time.toString(), \"reason\": reason });\n  }\n  addVip(name) {\n    return this.postJsonMethod(\"changeserver\", { \"request\": \"addServerVip\", \"playername\": name, \"servername\": this.server });\n  }\n  movePlayer(team, name) {\n    return this.postJsonMethod(\"moveplayer\", { \"teamid\": team, \"playername\": name, \"servername\": this.server });\n  }\n  getBanList() {\n    return this.getJsonMethod(\"infolist\", { \"type\": \"bannedList\", \"name\": encodeURIComponent(this.server) });\n  }\n  getLogs() {\n    return this.getJsonMethod(\"taillog\");\n  }\n}\n\nexport const OperationsApi = React.createContext();\n","\nexport default class JsonClient {\n  constructor() {\n    this.isWorking = true;\n    this.user = this.getUserInfo();\n  }\n  openLoginPage() {\n    window.location = this.constructApiUrl(\"login\");\n  }\n  constructApiUrl(method, params) {\n    params = params || {};\n    let paramStr = \"\";\n    for (let s in params) {\n      paramStr += s + \"=\" + params[s] + \"&\";\n    }\n    const apiEP = \"https://operations.bandofbrothers.site/api/\";\n    return apiEP + method + \"?\" + paramStr;\n  }\n  async fetchMethod(method, params) {\n    let result = await fetch(this.constructApiUrl(method, params), {\n      credentials: \"include\"\n    });\n    return result;\n  }\n  async postMethod(method, params) {\n    let result = await fetch(this.constructApiUrl(method, {}), params);\n    return result;\n  }\n  async postJsonMethod(method, params) {\n    const options = {\n      method: 'POST',\n      body: JSON.stringify(params),\n      credentials: \"include\",\n      headers: {\n          'Content-Type': 'application/json'\n      }\n    };\n    return await this.postMethod(method, options).then(result => {\n      return result.json().then(json => json, error => ({ \"error\": error }));\n    }, error => ({ \"error\": error }));\n  }\n  getJsonMethod(method, params) {\n    return this.fetchMethod(method, params).then(result => {\n      return result.json().then(json => json, error => ({ \"error\": error }));\n    }, error => ({ \"error\": error }));\n  }\n  async getUserInfo() {\n    const defaultUser = {\n      discord: {\n        name: \"\",\n        discriminator: 0,\n        avatar: \"\"\n      },\n      auth: {\n        is_signed_in: false,\n        is_admin: false\n      }\n    };\n    let response = await this.getJsonMethod(\"getinfo\");\n    if (!response.hasOwnProperty(\"error\")) {\n      return response;\n    }\n    return defaultUser;\n  }\n}","import React, { Component } from 'react';\nimport \"./TopBar.css\";\n\nimport { Link } from 'react-router-dom';\nimport { OperationsApi } from \"../api\";\n\nexport default class TopBar extends Component {\n  static contextType = OperationsApi;\n  state = { ready: false };\n  render() {\n    let api = this.context;\n    api.user.then((u) => (!this.state.ready) ? this.setState({ready: true, user: u}) : null);\n\n\n    return (\n      <div className=\"topbar\">\n        <h1 className=\"title\">Community Network</h1>\n        {\n          (this.state.ready && this.state.user.auth.is_signed_in) ?\n          (\n            <React.Fragment>\n              {(this.state.user.auth.region == \"EU\" || this.state.user.auth.region == \"ALL\") ? <Link to=\"/s1/\" className=\"link\">Server #1</Link> : \"\"}\n              {(this.state.user.auth.region == \"NA\" || this.state.user.auth.region == \"ALL\") ? <Link to=\"/s2/\" className=\"link\">Server #2</Link> : \"\"}\n              <a href=\"#logout-attempt\" className=\"link\" onClick={\n                (e) => {\n                  e.preventDefault();\n                  api.logout().then(_ => {\n                    window.location = \"/\";\n                  });\n                }\n              }>Logout</a>\n            </React.Fragment>\n          ) : (\n            <a href=\"#login-attempt\" className=\"link\" onClick={\n              (e) => {\n                e.preventDefault();\n                api.openLoginPage();\n              }\n            }>Login</a>\n          )\n        }\n      </div>\n    );\n\n\n  }\n\n}\n","import React, { Component, useState } from 'react';\nimport \"./ServerPanel.css\";\n\nimport { OperationsApi } from \"../api\";\n\nclass AdminTools extends Component {\n  static contextType = OperationsApi;\n\n  state = { ready: false, status: { msg: \"Servers are working.\", type: \"ok\" }, popup: { is: false }, choose: { is: false } };\n  nickname = \"\";\n\n  kickPlayer = this.kickPlayer.bind(this);\n  banPlayer = this.banPlayer.bind(this);\n  giveVip = this.giveVip.bind(this);\n  inputNickname = this.inputNickname.bind(this);\n  movePlayer = this.movePlayer.bind(this);\n\n  kickPlayer() {\n    // Load API\n    let api = this.context;\n    // If no nickname, return\n    if (this.nickname === \"\") return;\n\n    var promise = new Promise((resolve, reject) => {\n      var submit = (reason, time) => {\n        resolve(reason);\n      };\n      var chancel = (ev) => {\n        ev.preventDefault();\n        reject(\"Chanceled\");\n      };\n      this.setState(\n        s => ({\n          ...s,\n          status: { msg: \"Executing\", type: \"warn\" },\n          popup: { is: true, description: \"Enter a reason to kick.\", title: \"Kick \" + this.nickname, submit: submit, chancel: chancel }\n        })\n      );\n    });\n\n    promise.then(\n      (reason) => api.kickPlayer(this.nickname, reason || \"\")\n        .then(result => this.checkError(result)),\n      (e) => {}\n    ).finally(_ => this.setState(\n      s => ({\n        ...s,\n        popup: { is: false }\n      })\n    ));\n\n  }\n  banPlayer() {\n    let api = this.context;\n    if (this.nickname === \"\") return;\n\n    var promise = new Promise((resolve, reject) => {\n      var submit = (reason, time) => {\n        console.log(time);\n        resolve({reason, time});\n      };\n      var chancel = (ev) => {\n        ev.preventDefault();\n        reject(\"Chanceled\");\n      };\n      this.setState(\n        s => ({\n          ...s,\n          status: { msg: \"Executing\", type: \"warn\" },\n          popup: { is: true, description: \"Enter a reason to ban.\", title: \"Ban \" + this.nickname, submit: submit, chancel: chancel, time: true }\n        })\n      );\n    });\n\n    promise.then(\n      ({reason, time}) => api.banPlayer(this.nickname, reason, time)\n        .then(result => this.checkError(result)),\n      (e) => {}\n    ).finally(_ => this.setState(\n      s => ({\n        ...s,\n        popup: { is: false }\n      })\n    ));\n\n  }\n  movePlayer() {\n    let api = this.context;\n    if (this.nickname === \"\") return;\n\n    var promise = new Promise((resolve, reject) => {\n      var attack = _ => {\n        resolve(2);\n      };\n      var defend = _ => {\n        resolve(1);\n      };\n      var chancel = (ev) => {\n        ev.preventDefault();\n        reject(\"Chanceled\");\n      };\n      this.setState(\n        s => ({\n          ...s,\n          status: { msg: \"Executing\", type: \"warn\" },\n          choose: { is: true, title: \"Move player \" + this.nickname + \" ?\", attack: attack, chancel: chancel, defend: defend }\n        })\n      );\n    });\n\n    promise.then(\n      (side) => api.movePlayer(side, this.nickname)\n        .then(result => this.checkError(result)),\n      (e) => this.setState(\n        s => ({\n          ...s,\n          status: { msg: \"Servers are working.\", type: \"ok\" },\n        })\n      )\n    ).finally(_ => this.setState(\n      s => ({\n        ...s,\n        choose: { is: false }\n      })\n    ));\n  }\n  giveVip() {\n    let api = this.context;\n    if (this.nickname === \"\") return;\n    let state = window.confirm(\"Give Vip to \" + this.nickname + \"?\");\n    if (state) {\n        this.updateStatus({ msg: \"Executing\", type: \"warn\" });\n        let result = api.addVip(this.nickname).then(result => this.checkError(result));\n    }\n  }\n  inputNickname(ev) {\n    this.nickname = ev.target.value;\n  }\n  checkError(result) {\n    if (!result) {\n        this.updateStatus(\"Api currently not working.\");\n    } else if (result.hasOwnProperty(\"error\")) {\n        this.updateStatus({ msg: result.error, type: \"error\" });\n    } else {\n        this.updateStatus({ msg: JSON.stringify(result,null,'\\t'), type: \"ok\" });\n    }\n  }\n  updateStatus(status) {\n    this.setState(\n      s => ({ ...s, status: status })\n    );\n  }\n  render() {\n    let api = this.context;\n\n\n    if (!this.state.ready) {\n        api.switchServer(this.props.server);\n        api.user.then(\n          u => (!this.state.ready) ? this.setState(\n            s => ({ ...s, ready: true, user: u })\n          ) : null\n        );\n        return \"Loading..\";\n    }\n    if (this.state.user.auth.is_admin) {\n        return (\n        <React.Fragment>\n          <div className=\"sectiontitle\">\n            Admin tools - Server #{this.props.server}\n          </div>\n          <div className=\"serverpanel\">\n            <input type=\"text\" placeholder=\"Nickname\" onChange={this.inputNickname} />\n            <input type=\"button\" value=\"Ban\" onClick={this.banPlayer} />\n            <input type=\"button\" value=\"Kick\" onClick={this.kickPlayer} />\n            <input type=\"button\" value=\"Move\" onClick={this.movePlayer} />\n            <input type=\"button\" value=\"Give Vip\" onClick={this.giveVip} title=\"Function is disabled as it may cause issues.\" disabled />\n          </div>\n          <div className=\"statusbar\">\n            <Status text={this.state.status.msg.toString()} type={this.state.status.type} />\n          </div>\n          {(this.state.popup.is) ? <PopUp title={this.state.popup.title} description={this.state.popup.description} time={this.state.popup.time} submit={this.state.popup.submit} chancel={this.state.popup.chancel} />  : \"\"}\n          {(this.state.choose.is) ? <ChooseSide title={this.state.choose.title} chancel={this.state.choose.chancel} attack={this.state.choose.attack} defend={this.state.choose.defend} /> : \"\"}\n         </React.Fragment>\n        )\n    } else if(!this.state.user.is_signed_in) {\n        api.openLoginPage();\n    } else {\n      return \"No premissions.\";\n    }\n  }\n}\nexport default class ServerPanel extends Component {\n  static contextType = OperationsApi;\n  render() {\n    return (\n      <React.Fragment>\n        <AdminTools server={this.props.server} />\n        <BanList />\n      </React.Fragment>\n    );\n  }\n\n}\nclass BanList extends Component {\n  static contextType = OperationsApi;\n  state = {ready: false, list: []}\n  render() {\n    let api = this.context;\n    if(!this.state.ready){\n      console.log(\"loading..\");\n      api.getBanList().then(l => this.setState({ ready: true, list: l}));\n      return \"Loading..\";\n    } else {\n      console.log(this.state);\n      return (\n        <table className=\"banlist\">\n        <thead>\n          <th>Nickname</th>\n          <th>Reason</th>\n          <th>Admin</th>\n          <th>Period</th>\n          <th>Ban time</th>\n        </thead>\n        <tbody>\n        {\n          this.state.list.players.map(\n            (j, i) => (\n              <BannedPlayer key={i} player={j} />\n            )\n          )\n        }\n        </tbody></table>\n      );\n    }\n  }\n}\n\nfunction Status(props) {\n  return (\n    <div className={\"status \" + props.type}>\n    {props.text}\n    </div>\n  );\n }\n\n function PopUp(props) {\n  const [reason, setReason] = React.useState(\"\");\n  var time = \"0\";\n\n  return (\n    <div className=\"popup\">\n      <form onSubmit={ (ev) => { ev.preventDefault(); console.log(time); props.submit(reason, time); } }>\n        <h3>{props.title}</h3>\n        <p>{props.description}</p>\n        <label for=\"reason\">Enter reason:</label>\n        <input type=\"text\" id=\"reason\" name=\"reason\" onChange={(e) => setReason(e.target.value)} />\n        {(props.time) ? <BanTime change={(e) => {time = e.target.value;} } /> : \"\" }\n        <input type=\"button\" value=\"Chancel\" onClick={props.chancel} />\n        <input type=\"submit\" value=\"Submit\" />\n      </form>\n    </div>\n  );\n }\n\n function ChooseSide(props) {\n  return (\n    <div className=\"popup\">\n      <form>\n        <h3>{props.title}</h3>\n        <p>Choose where to move the player: Attack or Defend forces</p>\n        <input type=\"button\" value=\"Attack\" onClick={props.attack} />\n        <input type=\"button\" value=\"Defend\" onClick={props.defend} />\n        <input type=\"button\" value=\"Chancel\"  onClick={props.chancel}/>\n      </form>\n    </div>\n  );\n }\n\n function BanTime(props) {\n  return (\n    <div>\n      <label for=\"time\">Choose a ban time:</label>\n      <select id=\"time\" name=\"time\" onChange={props.change}>\n        <option value=\"0\" selected>Perm</option>\n        <option value=\"1\">1 day</option>\n        <option value=\"2\">2 days</option>\n        <option value=\"7\">1 week</option>\n      </select>\n    </div>\n  );\n }\n\nfunction BannedPlayer(props) {\n  return (\n    <tr>\n      <td>{props.player.displayName}</td>\n      <td>{props.player.reason}</td>\n      <td>{props.player.admin}</td>\n      <td>{props.player.banned_until}</td>\n      <td>{props.player.ban_timestamp}</td>\n    </tr>\n  );\n}","import './App.css';\n\nimport TopBar from \"./TopBar/TopBar.js\";\nimport ServerPanel from \"./ServerPanel/ServerPanel.js\";\n\nimport { OperationsApi, ApiProvider } from \"./api\";\nimport { BrowserRouter, Route } from 'react-router-dom'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n    <BrowserRouter>\n       <OperationsApi.Provider value={new ApiProvider()}>\n          <TopBar />\n          <Route path=\"/\" exact >\n          </Route>\n          <Route path=\"/s1/\">\n            <ServerPanel server=\"1\" />\n          </Route>\n          <Route path=\"/s2/\">\n            <ServerPanel server=\"2\" />\n          </Route>\n       </OperationsApi.Provider>\n    </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}