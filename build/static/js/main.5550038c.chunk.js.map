{"version":3,"sources":["logo.svg","TopBar/TopBar.js","api.js","JsonApi.js","ServerPanel/ServerPanel.js","App.js","reportWebVitals.js","index.js"],"names":["TopBar","className","Component","ApiProvider","server","this","fetchMethod","name","reason","postJsonMethod","team","isWorking","user","getUserInfo","window","location","constructApiUrl","method","params","paramStr","s","fetch","credentials","result","options","body","JSON","stringify","headers","postMethod","then","json","error","defaultUser","discord","discriminator","avatar","auth","is_signed_in","is_admin","getJsonMethod","response","hasOwnProperty","alert","OperationsApi","React","createContext","ServerPanel","state","ready","status","msg","type","nickname","kickPlayer","bind","banPlayer","giveVip","inputNickname","movePlayer","api","context","prompt","updateStatus","checkError","confirm","side","addVip","ev","target","value","setState","u","Fragment","placeholder","onChange","onClick","title","disabled","Status","text","openLoginPage","props","contextType","App","Provider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5550038c.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.103b5fa1.svg\";","import React, { Component } from 'react';\nimport \"./TopBar.css\";\n\nexport default class TopBar extends Component {\n  render() {\n    return (\n      <div className=\"topbar\">\n        Community Operations\n      </div>\n    )\n  }\n}\n","import React from \"react\";\r\nimport JsonClient from \"./JsonApi\";\r\n\r\nexport class ApiProvider extends JsonClient {\r\n  constructor() {\r\n    super();\r\n    this.server = \"Community Operations #1\";\r\n  }\r\n  logout() {\r\n    return this.fetchMethod(\"logout\");\r\n  }\r\n  kickPlayer(name, reason) {\r\n    return this.postJsonMethod(\"changeplayer\", { \"request\": \"kickPlayer\", \"playername\": name, \"servername\": this.server, \"reason\": reason });\r\n  }\r\n  banPlayer(name) {\r\n    return this.postJsonMethod(\"changeserver\", { \"request\": \"addServerBan\", \"playername\": name, \"servername\": this.server });\r\n  }\r\n  addVip(name) {\r\n    return this.postJsonMethod(\"changeserver\", { \"request\": \"addServerVip\", \"playername\": name, \"servername\": this.server });\r\n  }\r\n  movePlayer(team, name) {\r\n    return this.postJsonMethod(\"moveplayer\", { \"teamid\": team, \"playername\": name, \"servername\": this.server });\r\n  }\r\n}\r\n\r\nexport const OperationsApi = React.createContext();\r\n","\r\nexport default class JsonClient {\r\n  constructor() {\r\n    this.isWorking = true;\r\n    this.user = this.getUserInfo();\r\n  }\r\n  openLoginPage() {\r\n    window.location = this.constructApiUrl(\"login\");\r\n  }\r\n  constructApiUrl(method, params) {\r\n    params = params || {};\r\n    let paramStr = \"\";\r\n    for (let s in params) {\r\n      paramStr += s + \"=\" + params[s] + \"&\";\r\n    }\r\n    const apiEP = \"https://operations.bandofbrothers.site/api/\";\r\n    return apiEP + method + \"?\" + paramStr;\r\n  }\r\n  async fetchMethod(method, params) {\r\n    let result = await fetch(this.constructApiUrl(method, params), {\r\n      credentials: \"include\"\r\n    });\r\n    return result;\r\n  }\r\n  async postMethod(method, params) {\r\n    let result = await fetch(this.constructApiUrl(method, {}), params);\r\n    return result;\r\n  }\r\n  async postJsonMethod(method, params) {\r\n    const options = {\r\n      method: 'POST',\r\n      body: JSON.stringify(params),\r\n      credentials: \"include\",\r\n      headers: {\r\n          'Content-Type': 'application/json'\r\n      }\r\n    };\r\n    return await this.postMethod(method, options).then(result => {\r\n      return result.json().then(json => json, error => ({ \"error\": error }));\r\n    }, error => ({ \"error\": error }));\r\n  }\r\n  async getJsonMethod(method, params) {\r\n    return await this.fetchMethod(method, params).then(result => {\r\n      return result.json().then(json => json, error => ({ \"error\": error }));\r\n    }, error => ({ \"error\": error }));\r\n  }\r\n  async getUserInfo() {\r\n    const defaultUser = {\r\n      discord: {\r\n        name: \"\",\r\n        discriminator: 0,\r\n        avatar: \"\"\r\n      },\r\n      auth: {\r\n        is_signed_in: false,\r\n        is_admin: false\r\n      }\r\n    };\r\n    let response = await this.getJsonMethod(\"getinfo\");\r\n    if (!response.hasOwnProperty(\"error\")) {\r\n      return response;\r\n    }\r\n    alert(response.error);\r\n    return defaultUser;\r\n  }\r\n}","import React, { Component } from 'react';\nimport \"./ServerPanel.css\";\n\nimport { OperationsApi } from \"../api\";\n\nexport default class ServerPanel extends Component {\n  static contextType = OperationsApi;\n\n  state = { ready: false, status: { msg: \"\", type: \"\" } };\n  nickname = \"\";\n\n  kickPlayer = this.kickPlayer.bind(this);\n  banPlayer = this.banPlayer.bind(this);\n  giveVip = this.giveVip.bind(this);\n  inputNickname = this.inputNickname.bind(this);\n  movePlayer = this.movePlayer.bind(this);\n\n  kickPlayer() {\n    let api = this.context;\n    if (this.nickname === \"\") return;\n    var reason = window.prompt(\"Please enter reason to kick\", \"Kicked by admin.\");\n    this.updateStatus({ msg: \"Executing\", type: \"warn\" });\n    api.kickPlayer(this.nickname, reason || \"\").then(result => this.checkError(result));\n  }\n  banPlayer() {\n    let api = this.context;\n    if (this.nickname === \"\") return;\n    let state = window.confirm(\"Are you sure you want to ban \" + this.nickname + \"?\");\n    if (state) {\n        this.updateStatus({ msg: \"Executing\", type: \"warn\" });\n        api.banPlayer(this.nickname).then(result => this.checkError(result));\n    }\n  }\n  movePlayer() {\n    let api = this.context;\n    if (this.nickname === \"\") return;\n    var side = window.prompt(\"Please, enter side (1 or 2)\", \"1\");\n    if (side === \"1\" || side === \"2\") {\n        this.updateStatus({ msg: \"Executing\", type: \"warn\" });\n        api.movePlayer(side, this.nickname).then(result => this.checkError(result));\n    }\n  }\n  giveVip() {\n    let api = this.context;\n    if (this.nickname === \"\") return;\n    let state = window.confirm(\"Give Vip to \" + this.nickname + \"?\");\n    if (state) {\n        this.updateStatus({ msg: \"Executing\", type: \"warn\" });\n        let result = api.addVip(this.nickname).then(result => this.checkError(result));\n    }\n  }\n  inputNickname(ev) {\n    this.nickname = ev.target.value;\n  }\n  checkError(result) {\n    if (!result) {\n        this.updateStatus(\"Api currently not working.\");\n    } else if (result.hasOwnProperty(\"error\")) {\n        this.updateStatus({ msg: result.error, type: \"error\" });\n    } else {\n        this.updateStatus(JSON.stringify(result,null,'\\t'));\n    }\n  }\n  updateStatus(status) {\n    this.setState(s => ({ ready: s.ready, status: status, user: s.user }));\n  }\n  render() {\n    let api = this.context;\n    api.user.then((u) => (!this.state.ready) ? this.setState({ready: true, user: u}) : null);\n    if (!this.state.ready) {\n        return \"Loading..\";\n    }\n    if (this.state.user.auth.is_admin) {\n        return (\n        <React.Fragment>\n          <div className=\"serverpanel\">\n            <input type=\"text\" placeholder=\"Nickname\" onChange={this.inputNickname} />\n            <input type=\"button\" value=\"Ban\" onClick={this.banPlayer} />\n            <input type=\"button\" value=\"Kick\" onClick={this.kickPlayer} />\n            <input type=\"button\" value=\"Move\" onClick={this.movePlayer} />\n            <input type=\"button\" value=\"Give Vip\" onClick={this.giveVip} title=\"Function is disabled as it may cause issues.\" disabled />\n          </div>\n          <div className=\"statusbar\">\n            <Status text={this.state.status.msg} type={this.state.status.type} />\n          </div>\n         </React.Fragment>\n        )\n    } else if(!this.state.user.is_signed_in) {\n        api.openLoginPage();\n    } else {\n      return \"No premissions.\";\n    }\n  }\n}\n\nfunction Status(props) {\n  return (\n    <div className={\"status \" + props.type}>\n    {props.text}\n    </div>\n  );\n}","import logo from './logo.svg';\nimport './App.css';\n\nimport TopBar from \"./TopBar/TopBar.js\";\nimport ServerPanel from \"./ServerPanel/ServerPanel.js\";\n\nimport { OperationsApi, ApiProvider } from \"./api\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n        <TopBar />\n        <OperationsApi.Provider value={new ApiProvider()}>\n            <ServerPanel />\n        </OperationsApi.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}