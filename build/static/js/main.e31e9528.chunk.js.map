{"version":3,"sources":["api.js","JsonApi.js","TopBar/TopBar.js","ServerPanel/ServerPanel.js","App.js","index.js"],"names":["ApiProvider","switchServer","number","this","server","_server","fetchMethod","name","reason","postJsonMethod","time","console","log","toString","team","getJsonMethod","isWorking","user","getUserInfo","window","location","constructApiUrl","method","params","paramStr","s","fetch","credentials","result","options","body","JSON","stringify","headers","postMethod","then","json","error","defaultUser","discord","discriminator","avatar","auth","is_signed_in","is_admin","response","hasOwnProperty","alert","OperationsApi","React","createContext","TopBar","state","ready","context","u","setState","className","region","to","Component","contextType","AdminTools","status","msg","type","popup","is","nickname","kickPlayer","bind","banPlayer","giveVip","inputNickname","movePlayer","api","Promise","resolve","reject","submit","chancel","ev","preventDefault","description","title","checkError","e","finally","_","side","prompt","updateStatus","confirm","addVip","target","value","Fragment","props","placeholder","onChange","onClick","disabled","Status","text","PopUp","openLoginPage","ServerPanel","BanList","list","getBanList","l","useState","setReason","onSubmit","for","id","BanTime","change","selected","App","Provider","path","exact","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"2VAGaA,EAAb,kDACE,aAAe,IAAD,8BACZ,gBACKC,aAAa,KAFN,EADhB,yDAKeC,GACXC,KAAKC,OAAS,yBAA2BF,EACzCC,KAAKE,QAAU,2BAA6BH,IAPhD,+BAUI,OAAOC,KAAKG,YAAY,YAV5B,iCAYaC,EAAMC,GACf,OAAOL,KAAKM,eAAe,eAAgB,CAAE,QAAW,aAAc,WAAcF,EAAM,WAAcJ,KAAKC,OAAQ,OAAUI,MAbnI,gCAeYD,EAAMC,EAAQE,GAEtB,OADAC,QAAQC,IAAIF,GACLP,KAAKM,eAAe,eAAgB,CAAE,QAAW,eAAgB,WAAcF,EAAM,WAAcJ,KAAKC,OAAQ,QAAWM,EAAKG,WAAY,OAAUL,MAjBjK,6BAmBSD,GACL,OAAOJ,KAAKM,eAAe,eAAgB,CAAE,QAAW,eAAgB,WAAcF,EAAM,WAAcJ,KAAKE,YApBnH,iCAsBaS,EAAMP,GACf,OAAOJ,KAAKM,eAAe,aAAc,CAAE,OAAUK,EAAM,WAAcP,EAAM,WAAcJ,KAAKE,YAvBtG,mCA0BI,OAAOF,KAAKY,cAAc,WAAY,CAAE,KAAQ,aAAc,WAAcZ,KAAKE,YA1BrF,gCA6BI,OAAOF,KAAKY,cAAc,eA7B9B,G,WCDE,aAAe,oBACbZ,KAAKa,WAAY,EACjBb,KAAKc,KAAOd,KAAKe,c,4DAGjBC,OAAOC,SAAWjB,KAAKkB,gBAAgB,W,sCAEzBC,EAAQC,GACtBA,EAASA,GAAU,GACnB,IAAIC,EAAW,GACf,IAAK,IAAIC,KAAKF,EACZC,GAAYC,EAAI,IAAMF,EAAOE,GAAK,IAGpC,MADc,8CACCH,EAAS,IAAME,I,2EAEdF,EAAQC,G,uFACLG,MAAMvB,KAAKkB,gBAAgBC,EAAQC,GAAS,CAC7DI,YAAa,Y,cADXC,E,yBAGGA,G,mLAEQN,EAAQC,G,uFACJG,MAAMvB,KAAKkB,gBAAgBC,EAAQ,IAAKC,G,cAAvDK,E,yBACGA,G,uLAEYN,EAAQC,G,8EACrBM,EAAU,CACdP,OAAQ,OACRQ,KAAMC,KAAKC,UAAUT,GACrBI,YAAa,UACbM,QAAS,CACL,eAAgB,qB,SAGT9B,KAAK+B,WAAWZ,EAAQO,GAASM,MAAK,SAAAP,GACjD,OAAOA,EAAOQ,OAAOD,MAAK,SAAAC,GAAI,OAAIA,KAAM,SAAAC,GAAK,MAAK,CAAE,MAASA,SAC5D,SAAAA,GAAK,MAAK,CAAE,MAASA,M,8NAENf,EAAQC,G,iFACbpB,KAAKG,YAAYgB,EAAQC,GAAQY,MAAK,SAAAP,GACjD,OAAOA,EAAOQ,OAAOD,MAAK,SAAAC,GAAI,OAAIA,KAAM,SAAAC,GAAK,MAAK,CAAE,MAASA,SAC5D,SAAAA,GAAK,MAAK,CAAE,MAASA,M,8SAGlBC,EAAc,CAClBC,QAAS,CACPhC,KAAM,GACNiC,cAAe,EACfC,OAAQ,IAEVC,KAAM,CACJC,cAAc,EACdC,UAAU,I,SAGOzC,KAAKY,cAAc,W,WAApC8B,E,QACUC,eAAe,S,yCACpBD,G,cAETE,MAAMF,EAASR,O,kBACRC,G,8GD3BEU,EAAgBC,IAAMC,gBE9BdC,E,4MAEnBC,MAAQ,CAAEC,OAAO,G,uDACP,IAAD,OAGP,OAFUlD,KAAKmD,QACXrC,KAAKkB,MAAK,SAACoB,GAAD,OAAS,EAAKH,MAAMC,MAAiD,KAAxC,EAAKG,SAAS,CAACH,OAAO,EAAMpC,KAAMsC,OACxEpD,KAAKiD,MAAMC,MAMNlD,KAAKiD,MAAMnC,KAAKyB,KAAKC,aAE3B,sBAAKc,UAAU,SAAf,UACE,oBAAIA,UAAU,QAAd,+BACiC,MAA/BtD,KAAKiD,MAAMnC,KAAKyB,KAAKgB,QAAiD,OAA/BvD,KAAKiD,MAAMnC,KAAKyB,KAAKgB,OAAmB,cAAC,IAAD,CAAMC,GAAG,OAAOF,UAAU,OAA1B,uBAAoD,GACpG,MAA/BtD,KAAKiD,MAAMnC,KAAKyB,KAAKgB,QAAiD,OAA/BvD,KAAKiD,MAAMnC,KAAKyB,KAAKgB,OAAmB,cAAC,IAAD,CAAMC,GAAG,OAAOF,UAAU,OAA1B,uBAAoD,MAIjI,sBAAKA,UAAU,SAAf,UACN,oBAAIA,UAAU,QAAd,+BACA,cAAC,IAAD,CAAME,GAAG,UAAUF,UAAU,OAA7B,sBAfA,qBAAKA,UAAU,SAAf,SACE,oBAAIA,UAAU,QAAd,qC,GAT0BG,aAAfT,EACZU,YAAcb,E,2BCFjBc,G,kNAGJV,MAAQ,CAAEC,OAAO,EAAOU,OAAQ,CAAEC,IAAK,GAAIC,KAAM,IAAMC,MAAO,CAAEC,IAAI,I,EACpEC,SAAW,G,EAEXC,WAAa,EAAKA,WAAWC,KAAhB,gB,EACbC,UAAY,EAAKA,UAAUD,KAAf,gB,EACZE,QAAU,EAAKA,QAAQF,KAAb,gB,EACVG,cAAgB,EAAKA,cAAcH,KAAnB,gB,EAChBI,WAAa,EAAKA,WAAWJ,KAAhB,gB,2DAEC,IAAD,OAEPK,EAAMxE,KAAKmD,QAEO,KAAlBnD,KAAKiE,UAEK,IAAIQ,SAAQ,SAACC,EAASC,GAClC,IAAIC,EAAS,SAACvE,EAAQE,GACpBmE,EAAQrE,IAENwE,EAAU,SAACC,GACbA,EAAGC,iBACHJ,EAAO,cAET,EAAKtB,UACH,SAAA/B,GAAC,kCACIA,GADJ,IAECsC,OAAQ,CAAEC,IAAK,YAAaC,KAAM,QAClCC,MAAO,CAAEC,IAAI,EAAMgB,YAAa,0BAA2BC,MAAO,QAAU,EAAKhB,SAAUW,OAAQA,EAAQC,QAASA,WAKlH7C,MACN,SAAC3B,GAAD,OAAYmE,EAAIN,WAAW,EAAKD,SAAU5D,GAAU,IACjD2B,MAAK,SAAAP,GAAM,OAAI,EAAKyD,WAAWzD,SAClC,SAAC0D,OACDC,SAAQ,SAAAC,GAAC,OAAI,EAAKhC,UAClB,SAAA/B,GAAC,kCACIA,GADJ,IAECyC,MAAO,CAAEC,IAAI,a,kCAKN,IAAD,OACNQ,EAAMxE,KAAKmD,QACO,KAAlBnD,KAAKiE,UAEK,IAAIQ,SAAQ,SAACC,EAASC,GAClC,IAAIC,EAAS,SAACvE,EAAQE,GACpBC,QAAQC,IAAIF,GACZmE,EAAQ,CAACrE,SAAQE,UAEfsE,EAAU,SAACC,GACbA,EAAGC,iBACHJ,EAAO,cAET,EAAKtB,UACH,SAAA/B,GAAC,kCACIA,GADJ,IAECsC,OAAQ,CAAEC,IAAK,YAAaC,KAAM,QAClCC,MAAO,CAAEC,IAAI,EAAMgB,YAAa,yBAA0BC,MAAO,OAAS,EAAKhB,SAAUW,OAAQA,EAAQC,QAASA,EAAStE,MAAM,WAK/HyB,MACN,gBAAE3B,EAAF,EAAEA,OAAQE,EAAV,EAAUA,KAAV,OAAoBiE,EAAIJ,UAAU,EAAKH,SAAU5D,EAAQE,GACtDyB,MAAK,SAAAP,GAAM,OAAI,EAAKyD,WAAWzD,SAClC,SAAC0D,OACDC,SAAQ,SAAAC,GAAC,OAAI,EAAKhC,UAClB,SAAA/B,GAAC,kCACIA,GADJ,IAECyC,MAAO,CAAEC,IAAI,a,mCAKL,IAAD,OACPQ,EAAMxE,KAAKmD,QACf,GAAsB,KAAlBnD,KAAKiE,SAAT,CACA,IAAIqB,EAAOtE,OAAOuE,OAAO,8BAA+B,KAC3C,MAATD,GAAyB,MAATA,IAChBtF,KAAKwF,aAAa,CAAE3B,IAAK,YAAaC,KAAM,SAC5CU,EAAID,WAAWe,EAAMtF,KAAKiE,UAAUjC,MAAK,SAAAP,GAAM,OAAI,EAAKyD,WAAWzD,U,gCAG9D,IAAD,OACJ+C,EAAMxE,KAAKmD,QACf,GAAsB,KAAlBnD,KAAKiE,UACGjD,OAAOyE,QAAQ,eAAiBzF,KAAKiE,SAAW,KACjD,CACPjE,KAAKwF,aAAa,CAAE3B,IAAK,YAAaC,KAAM,SAC/BU,EAAIkB,OAAO1F,KAAKiE,UAAUjC,MAAK,SAAAP,GAAM,OAAI,EAAKyD,WAAWzD,S,oCAG9DqD,GACZ9E,KAAKiE,SAAWa,EAAGa,OAAOC,Q,iCAEjBnE,GACJA,EAEMA,EAAOkB,eAAe,SAC7B3C,KAAKwF,aAAa,CAAE3B,IAAKpC,EAAOS,MAAO4B,KAAM,UAE7C9D,KAAKwF,aAAa,CAAE3B,IAAKjC,KAAKC,UAAUJ,EAAO,KAAK,MAAOqC,KAAM,SAJjE9D,KAAKwF,aAAa,gC,mCAOX5B,GACX5D,KAAKqD,UACH,SAAA/B,GAAC,kCAAUA,GAAV,IAAasC,OAAQA,S,+BAGhB,IAAD,OACHY,EAAMxE,KAAKmD,QAGf,OAAKnD,KAAKiD,MAAMC,MASZlD,KAAKiD,MAAMnC,KAAKyB,KAAKE,SAErB,eAAC,IAAMoD,SAAP,WACE,sBAAKvC,UAAU,eAAf,mCACyBtD,KAAK8F,MAAM7F,UAEpC,sBAAKqD,UAAU,cAAf,UACE,uBAAOQ,KAAK,OAAOiC,YAAY,WAAWC,SAAUhG,KAAKsE,gBACzD,uBAAOR,KAAK,SAAS8B,MAAM,MAAMK,QAASjG,KAAKoE,YAC/C,uBAAON,KAAK,SAAS8B,MAAM,OAAOK,QAASjG,KAAKkE,aAChD,uBAAOJ,KAAK,SAAS8B,MAAM,OAAOK,QAASjG,KAAKuE,aAChD,uBAAOT,KAAK,SAAS8B,MAAM,WAAWK,QAASjG,KAAKqE,QAASY,MAAM,+CAA+CiB,UAAQ,OAE5H,qBAAK5C,UAAU,YAAf,SACE,cAAC6C,EAAD,CAAQC,KAAMpG,KAAKiD,MAAMW,OAAOC,IAAInD,WAAYoD,KAAM9D,KAAKiD,MAAMW,OAAOE,SAExE9D,KAAKiD,MAAMc,MAAMC,GAAM,cAACqC,EAAD,CAAOpB,MAAOjF,KAAKiD,MAAMc,MAAMkB,MAAOD,YAAahF,KAAKiD,MAAMc,MAAMiB,YAAazE,KAAMP,KAAKiD,MAAMc,MAAMxD,KAAMqE,OAAQ5E,KAAKiD,MAAMc,MAAMa,OAAQC,QAAS7E,KAAKiD,MAAMc,MAAMc,UAAe,MAG5M7E,KAAKiD,MAAMnC,KAAK0B,aAGlB,uBAFLgC,EAAI8B,iBA5BJ9B,EAAI1E,aAAaE,KAAK8F,MAAM7F,QAC5BuE,EAAI1D,KAAKkB,MACP,SAAAoB,GAAC,OAAM,EAAKH,MAAMC,MAEd,KAFuB,EAAKG,UAC9B,SAAA/B,GAAC,kCAAUA,GAAV,IAAa4B,OAAO,EAAMpC,KAAMsC,UAG9B,iB,GA/HUK,cAAnBE,EACGD,YAAcb,E,IA0JF0D,E,uKAGjB,OACE,eAAC,IAAMV,SAAP,WACE,cAAC,EAAD,CAAY5F,OAAQD,KAAK8F,MAAM7F,SAC/B,cAAC,EAAD,W,GANiCwD,aAApB8C,EACZ7C,YAAcb,E,IAWjB2D,E,4MAEJvD,MAAQ,CAACC,OAAO,EAAOuD,KAAM,I,uDACnB,IAAD,OACHjC,EAAMxE,KAAKmD,QACf,OAAInD,KAAKiD,MAAMC,OAIf1C,QAAQC,IAAIT,KAAKiD,OACP,0BAJRuB,EAAIkC,aAAa1E,MAAK,SAAA2E,GAAC,OAAI,EAAKtD,SAAS,CAAEH,OAAO,EAAMuD,KAAME,OACvD,iB,GAPSlD,aAiBtB,SAAS0C,EAAOL,GACd,OACE,qBAAKxC,UAAW,UAAYwC,EAAMhC,KAAlC,SACCgC,EAAMM,OAKV,SAASC,EAAMP,GAAQ,IAAD,EACOhD,IAAM8D,SAAS,IADtB,mBACdvG,EADc,KACNwG,EADM,KAEjBtG,EAAO,IAEX,OACE,qBAAK+C,UAAU,QAAf,SACE,uBAAMwD,SAAW,SAAChC,GAASA,EAAGC,iBAAkBvE,QAAQC,IAAIF,GAAOuF,EAAMlB,OAAOvE,EAAQE,IAAxF,UACE,6BAAKuF,EAAMb,QACX,4BAAIa,EAAMd,cACV,uBAAO+B,IAAI,SAAX,2BACA,uBAAOjD,KAAK,OAAOkD,GAAG,SAAS5G,KAAK,SAAS4F,SAAU,SAACb,GAAD,OAAO0B,EAAU1B,EAAEQ,OAAOC,UAC/EE,EAAMvF,KAAQ,cAAC0G,EAAD,CAASC,OAAQ,SAAC/B,GAAO5E,EAAO4E,EAAEQ,OAAOC,SAAe,GACxE,uBAAO9B,KAAK,SAAS8B,MAAM,UAAUK,QAASH,EAAMjB,UACpD,uBAAOf,KAAK,SAAS8B,MAAM,gBAMlC,SAASqB,EAAQnB,GAChB,OACE,gCACE,uBAAOiB,IAAI,OAAX,gCACA,yBAAQC,GAAG,OAAO5G,KAAK,OAAO4F,SAAUF,EAAMoB,OAA9C,UACE,wBAAQtB,MAAM,IAAIuB,UAAQ,EAA1B,kBACA,wBAAQvB,MAAM,IAAd,mBACA,wBAAQA,MAAM,IAAd,oBACA,wBAAQA,MAAM,IAAd,0BApDFY,EACG9C,YAAcb,E,WCjJRuE,MApBf,WACE,OACE,qBAAK9D,UAAU,MAAf,SACA,cAAC,IAAD,UACG,eAACT,EAAcwE,SAAf,CAAwBzB,MAAO,IAAI/F,EAAnC,UACG,cAAC,EAAD,IACA,cAAC,IAAD,CAAOyH,KAAK,IAAIC,OAAK,IAErB,cAAC,IAAD,CAAOD,KAAK,OAAZ,SACE,cAAC,EAAD,CAAarH,OAAO,QAEtB,cAAC,IAAD,CAAOqH,KAAK,OAAZ,SACE,cAAC,EAAD,CAAarH,OAAO,gBCfhCuH,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.e31e9528.chunk.js","sourcesContent":["import React from \"react\";\nimport JsonClient from \"./JsonApi\";\n\nexport class ApiProvider extends JsonClient {\n  constructor() {\n    super();\n    this.switchServer(\"1\");\n  }\n  switchServer(number) {\n    this.server = \"Community Operations #\" + number;\n    this._server = \"Community Operations %23\" + number;\n  }\n  logout() {\n    return this.fetchMethod(\"logout\");\n  }\n  kickPlayer(name, reason) {\n    return this.postJsonMethod(\"changeplayer\", { \"request\": \"kickPlayer\", \"playername\": name, \"servername\": this.server, \"reason\": reason });\n  }\n  banPlayer(name, reason, time) {\n    console.log(time);\n    return this.postJsonMethod(\"changeserver\", { \"request\": \"addServerBan\", \"playername\": name, \"servername\": this.server, \"bantime\": time.toString(), \"reason\": reason });\n  }\n  addVip(name) {\n    return this.postJsonMethod(\"changeserver\", { \"request\": \"addServerVip\", \"playername\": name, \"servername\": this._server });\n  }\n  movePlayer(team, name) {\n    return this.postJsonMethod(\"moveplayer\", { \"teamid\": team, \"playername\": name, \"servername\": this._server });\n  }\n  getBanList() {\n    return this.getJsonMethod(\"infolist\", { \"type\": \"bannedList\", \"servername\": this._server });\n  }\n  getLogs() {\n    return this.getJsonMethod(\"taillog\");\n  }\n}\n\nexport const OperationsApi = React.createContext();\n","\nexport default class JsonClient {\n  constructor() {\n    this.isWorking = true;\n    this.user = this.getUserInfo();\n  }\n  openLoginPage() {\n    window.location = this.constructApiUrl(\"login\");\n  }\n  constructApiUrl(method, params) {\n    params = params || {};\n    let paramStr = \"\";\n    for (let s in params) {\n      paramStr += s + \"=\" + params[s] + \"&\";\n    }\n    const apiEP = \"https://operations.bandofbrothers.site/api/\";\n    return apiEP + method + \"?\" + paramStr;\n  }\n  async fetchMethod(method, params) {\n    let result = await fetch(this.constructApiUrl(method, params), {\n      credentials: \"include\"\n    });\n    return result;\n  }\n  async postMethod(method, params) {\n    let result = await fetch(this.constructApiUrl(method, {}), params);\n    return result;\n  }\n  async postJsonMethod(method, params) {\n    const options = {\n      method: 'POST',\n      body: JSON.stringify(params),\n      credentials: \"include\",\n      headers: {\n          'Content-Type': 'application/json'\n      }\n    };\n    return await this.postMethod(method, options).then(result => {\n      return result.json().then(json => json, error => ({ \"error\": error }));\n    }, error => ({ \"error\": error }));\n  }\n  async getJsonMethod(method, params) {\n    return await this.fetchMethod(method, params).then(result => {\n      return result.json().then(json => json, error => ({ \"error\": error }));\n    }, error => ({ \"error\": error }));\n  }\n  async getUserInfo() {\n    const defaultUser = {\n      discord: {\n        name: \"\",\n        discriminator: 0,\n        avatar: \"\"\n      },\n      auth: {\n        is_signed_in: false,\n        is_admin: false\n      }\n    };\n    let response = await this.getJsonMethod(\"getinfo\");\n    if (!response.hasOwnProperty(\"error\")) {\n      return response;\n    }\n    alert(response.error);\n    return defaultUser;\n  }\n}","import React, { Component } from 'react';\nimport \"./TopBar.css\";\n\nimport { Link } from 'react-router-dom';\nimport { OperationsApi } from \"../api\";\n\nexport default class TopBar extends Component {\n  static contextType = OperationsApi;\n  state = { ready: false };\n  render() {\n    let api = this.context;\n    api.user.then((u) => (!this.state.ready) ? this.setState({ready: true, user: u}) : null);\n    if (!this.state.ready) {\n      return (\n        <div className=\"topbar\">\n          <h1 className=\"title\">Community Network</h1>\n        </div>\n      )\n    } else if(this.state.user.auth.is_signed_in) {\n      return (\n        <div className=\"topbar\">\n          <h1 className=\"title\">Community Network</h1>\n          {(this.state.user.auth.region == \"EU\" || this.state.user.auth.region == \"ALL\") ? <Link to=\"/s1/\" className=\"link\">Server #1</Link> : \"\"}\n          {(this.state.user.auth.region == \"NA\" || this.state.user.auth.region == \"ALL\") ? <Link to=\"/s2/\" className=\"link\">Server #2</Link> : \"\"}\n        </div>\n      )\n    } else {\n      return (<div className=\"topbar\">\n        <h1 className=\"title\">Community Network</h1>\n        <Link to=\"/login/\" className=\"link\">Login</Link>\n      </div>);\n    }\n  }\n\n}\n","import React, { Component, useState } from 'react';\nimport \"./ServerPanel.css\";\n\nimport { OperationsApi } from \"../api\";\n\nclass AdminTools extends Component {\n  static contextType = OperationsApi;\n\n  state = { ready: false, status: { msg: \"\", type: \"\" }, popup: { is: false } };\n  nickname = \"\";\n\n  kickPlayer = this.kickPlayer.bind(this);\n  banPlayer = this.banPlayer.bind(this);\n  giveVip = this.giveVip.bind(this);\n  inputNickname = this.inputNickname.bind(this);\n  movePlayer = this.movePlayer.bind(this);\n\n  kickPlayer() {\n    // Load API\n    let api = this.context;\n    // If no nickname, return\n    if (this.nickname === \"\") return;\n\n    var promise = new Promise((resolve, reject) => {\n      var submit = (reason, time) => {\n        resolve(reason);\n      };\n      var chancel = (ev) => {\n        ev.preventDefault();\n        reject(\"Chanceled\");\n      };\n      this.setState(\n        s => ({\n          ...s,\n          status: { msg: \"Executing\", type: \"warn\" },\n          popup: { is: true, description: \"Enter a reason to kick.\", title: \"Kick \" + this.nickname, submit: submit, chancel: chancel }\n        })\n      );\n    });\n\n    promise.then(\n      (reason) => api.kickPlayer(this.nickname, reason || \"\")\n        .then(result => this.checkError(result)),\n      (e) => {}\n    ).finally(_ => this.setState(\n      s => ({\n        ...s,\n        popup: { is: false }\n      })\n    ));\n\n  }\n  banPlayer() {\n    let api = this.context;\n    if (this.nickname === \"\") return;\n\n    var promise = new Promise((resolve, reject) => {\n      var submit = (reason, time) => {\n        console.log(time);\n        resolve({reason, time});\n      };\n      var chancel = (ev) => {\n        ev.preventDefault();\n        reject(\"Chanceled\");\n      };\n      this.setState(\n        s => ({\n          ...s,\n          status: { msg: \"Executing\", type: \"warn\" },\n          popup: { is: true, description: \"Enter a reason to ban.\", title: \"Ban \" + this.nickname, submit: submit, chancel: chancel, time: true }\n        })\n      );\n    });\n\n    promise.then(\n      ({reason, time}) => api.banPlayer(this.nickname, reason, time)\n        .then(result => this.checkError(result)),\n      (e) => {}\n    ).finally(_ => this.setState(\n      s => ({\n        ...s,\n        popup: { is: false }\n      })\n    ));\n\n  }\n  movePlayer() {\n    let api = this.context;\n    if (this.nickname === \"\") return;\n    var side = window.prompt(\"Please, enter side (1 or 2)\", \"1\");\n    if (side === \"1\" || side === \"2\") {\n        this.updateStatus({ msg: \"Executing\", type: \"warn\" });\n        api.movePlayer(side, this.nickname).then(result => this.checkError(result));\n    }\n  }\n  giveVip() {\n    let api = this.context;\n    if (this.nickname === \"\") return;\n    let state = window.confirm(\"Give Vip to \" + this.nickname + \"?\");\n    if (state) {\n        this.updateStatus({ msg: \"Executing\", type: \"warn\" });\n        let result = api.addVip(this.nickname).then(result => this.checkError(result));\n    }\n  }\n  inputNickname(ev) {\n    this.nickname = ev.target.value;\n  }\n  checkError(result) {\n    if (!result) {\n        this.updateStatus(\"Api currently not working.\");\n    } else if (result.hasOwnProperty(\"error\")) {\n        this.updateStatus({ msg: result.error, type: \"error\" });\n    } else {\n        this.updateStatus({ msg: JSON.stringify(result,null,'\\t'), type: \"good\" });\n    }\n  }\n  updateStatus(status) {\n    this.setState(\n      s => ({ ...s, status: status })\n    );\n  }\n  render() {\n    let api = this.context;\n\n\n    if (!this.state.ready) {\n        api.switchServer(this.props.server);\n        api.user.then(\n          u => (!this.state.ready) ? this.setState(\n            s => ({ ...s, ready: true, user: u })\n          ) : null\n        );\n        return \"Loading..\";\n    }\n    if (this.state.user.auth.is_admin) {\n        return (\n        <React.Fragment>\n          <div className=\"sectiontitle\">\n            Admin tools - Server #{this.props.server}\n          </div>\n          <div className=\"serverpanel\">\n            <input type=\"text\" placeholder=\"Nickname\" onChange={this.inputNickname} />\n            <input type=\"button\" value=\"Ban\" onClick={this.banPlayer} />\n            <input type=\"button\" value=\"Kick\" onClick={this.kickPlayer} />\n            <input type=\"button\" value=\"Move\" onClick={this.movePlayer} />\n            <input type=\"button\" value=\"Give Vip\" onClick={this.giveVip} title=\"Function is disabled as it may cause issues.\" disabled />\n          </div>\n          <div className=\"statusbar\">\n            <Status text={this.state.status.msg.toString()} type={this.state.status.type} />\n          </div>\n          {(this.state.popup.is) ? <PopUp title={this.state.popup.title} description={this.state.popup.description} time={this.state.popup.time} submit={this.state.popup.submit} chancel={this.state.popup.chancel} />  : \"\"}\n         </React.Fragment>\n        )\n    } else if(!this.state.user.is_signed_in) {\n        api.openLoginPage();\n    } else {\n      return \"No premissions.\";\n    }\n  }\n}\nexport default class ServerPanel extends Component {\n  static contextType = OperationsApi;\n  render() {\n    return (\n      <React.Fragment>\n        <AdminTools server={this.props.server} />\n        <BanList />\n      </React.Fragment>\n    );\n  }\n\n}\nclass BanList extends Component {\n  static contextType = OperationsApi;\n  state = {ready: false, list: []}\n  render() {\n    let api = this.context;\n    if(!this.state.ready){\n      api.getBanList().then(l => this.setState({ ready: true, list: l}));\n      return \"Loading..\";\n    } else {\n    console.log(this.state);\n      return (<div>\n\n      </div>);\n    }\n  }\n}\n\nfunction Status(props) {\n  return (\n    <div className={\"status \" + props.type}>\n    {props.text}\n    </div>\n  );\n }\n\n function PopUp(props) {\n  const [reason, setReason] = React.useState(\"\");\n  var time = \"0\";\n\n  return (\n    <div className=\"popup\">\n      <form onSubmit={ (ev) => { ev.preventDefault(); console.log(time); props.submit(reason, time); } }>\n        <h3>{props.title}</h3>\n        <p>{props.description}</p>\n        <label for=\"reason\">Enter reason:</label>\n        <input type=\"text\" id=\"reason\" name=\"reason\" onChange={(e) => setReason(e.target.value)} />\n        {(props.time) ? <BanTime change={(e) => {time = e.target.value;} } /> : \"\" }\n        <input type=\"button\" value=\"Chancel\" onClick={props.chancel} />\n        <input type=\"submit\" value=\"Submit\" />\n      </form>\n    </div>\n  );\n }\n\n function BanTime(props) {\n  return (\n    <div>\n      <label for=\"time\">Choose a ban time:</label>\n      <select id=\"time\" name=\"time\" onChange={props.change}>\n        <option value=\"0\" selected>Perm</option>\n        <option value=\"1\">1 day</option>\n        <option value=\"2\">2 days</option>\n        <option value=\"7\">1 week</option>\n      </select>\n    </div>\n  );\n }\n\n\n\n","import './App.css';\n\nimport TopBar from \"./TopBar/TopBar.js\";\nimport ServerPanel from \"./ServerPanel/ServerPanel.js\";\n\nimport { OperationsApi, ApiProvider } from \"./api\";\nimport { BrowserRouter, Route } from 'react-router-dom'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n    <BrowserRouter>\n       <OperationsApi.Provider value={new ApiProvider()}>\n          <TopBar />\n          <Route path=\"/\" exact >\n          </Route>\n          <Route path=\"/s1/\">\n            <ServerPanel server=\"1\" />\n          </Route>\n          <Route path=\"/s2/\">\n            <ServerPanel server=\"2\" />\n          </Route>\n       </OperationsApi.Provider>\n    </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}