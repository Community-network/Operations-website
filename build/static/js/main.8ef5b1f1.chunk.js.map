{"version":3,"sources":["logo.svg","TopBar/TopBar.js","api.js","ServerPanel/ServerPanel.js","App.js","reportWebVitals.js","index.js"],"names":["TopBar","className","Component","defaultUser","discord","name","discriminator","avatar","auth","is_signed_in","is_admin","ApiProvider","this","isWorking","user","getUserInfo","server","window","location","constructApiUrl","fetchMethod","method","params","paramStr","s","fetch","credentials","result","reason","json","a","hasOwnProperty","undefined","response","catch","e","console","log","userSetInfo","OperationsApi","React","createContext","ServerPanel","state","ready","nickname","kickPlayer","bind","banPlayer","giveVip","inputNickname","api","context","prompt","then","checkError","confirm","addVip","ev","target","value","alert","error","JSON","stringify","u","setState","type","placeholder","onChange","onClick","openLoginPage","contextType","App","Provider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8ef5b1f1.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.103b5fa1.svg\";","import React, { Component } from 'react';\nimport \"./TopBar.css\";\n\nexport default class TopBar extends Component {\n  render() {\n    return (\n      <div className=\"topbar\">\n        Community Operations\n      </div>\n    )\n  }\n}\n","import React from \"react\";\r\n\r\nconst defaultUser = {\r\n  discord: {\r\n    name: \"\",\r\n    discriminator: 0,\r\n    avatar: \"\"\r\n  },\r\n  auth: {\r\n    is_signed_in: false,\r\n    is_admin: false\r\n  }\r\n};\r\n\r\nexport class ApiProvider {\r\n  constructor() {\r\n    this.isWorking = true;\r\n    this.user = this.getUserInfo();\r\n    this.server = \"Operations\";\r\n  }\r\n  tryToLogin() {\r\n    this.getUserInfo();\r\n  }\r\n  openLoginPage() {\r\n    window.location = this.constructApiUrl(\"login\");\r\n  }\r\n  async logout() {\r\n    await this.fetchMethod(\"logout\");\r\n  }\r\n  constructApiUrl(method, params) {\r\n    params = params || {};\r\n    let paramStr = \"\";\r\n    for (let s in params) {\r\n      paramStr += s + \"=\" + params[s] + \"&\";\r\n    }\r\n    const apiEP = \"//operations.bandofbrothers.site/api/\";\r\n    return apiEP + method + \"?\" + paramStr;\r\n  }\r\n  async fetchMethod(method, params) {\r\n    let result = await fetch(this.constructApiUrl(method, params), {\r\n      credentials: \"include\"\r\n    });\r\n    return result;\r\n  }\r\n  async kickPlayer(name, reason) {\r\n    let result = await this.fetchMethod(\"changeplayer\", { \"request\": \"kickPlayer\", \"playername\": name, \"servername\": this.server, \"reason\": reason });\r\n    return await result.json();\r\n  }\r\n  async banPlayer(name) {\r\n    let result = await this.fetchMethod(\"changeserver\", { \"request\": \"addServerBan\", \"playername\": name, \"servername\": this.server });\r\n    return await result.json();\r\n  }\r\n  async addVip(name) {\r\n    let result = await this.fetchMethod(\"changeserver\", { \"request\": \"addServerVip\", \"playername\": name, \"servername\": this.server });\r\n    return await result.json();\r\n  }\r\n  userSetInfo(a) {\r\n    if (!a.hasOwnProperty(\"error\")) {\r\n      return a;\r\n    } else {\r\n      return defaultUser;\r\n    }\r\n  }\r\n  async getUserInfo() {\r\n    let response = await this.fetchMethod(\"getinfo\");\r\n    if (response !== undefined) {\r\n      let json = await response.json().catch((e) => console.log(e));\r\n      if (json !== undefined) {\r\n        return this.userSetInfo(json);\r\n      }\r\n    }\r\n    this.isWorking = false;\r\n    return defaultUser;\r\n  }\r\n}\r\n\r\nexport const OperationsApi = React.createContext();\r\n","import React, { Component } from 'react';\nimport \"./ServerPanel.css\";\n\nimport { OperationsApi } from \"../api\";\n\nexport default class ServerPanel extends Component {\n  static contextType = OperationsApi;\n  state = { ready: false };\n  nickname = \"\";\n  kickPlayer = this.kickPlayer.bind(this);\n  banPlayer = this.banPlayer.bind(this);\n  giveVip = this.giveVip.bind(this);\n  inputNickname = this.inputNickname.bind(this);\n\n  kickPlayer() {\n    let api = this.context;\n    console.log(this);\n    var reason = window.prompt(\"Please enter reason to kick\", \"Kicked by admin.\");\n    api.kickPlayer(this.nickname, reason || \"\").then(result => this.checkError(result));\n  }\n  banPlayer() {\n    let api = this.context;\n    let state = window.confirm(\"Are you sure you want to ban \" + this.nickname + \"?\");\n    if (state) {\n        api.banPlayer(this.nickname).then(result => this.checkError(result));\n    }\n  }\n  giveVip() {\n    let api = this.context;\n    let state = window.confirm(\"Give Vip to \" + this.nickname + \"?\");\n    if (state) {\n        let result = api.addVip(this.nickname).then(result => this.checkError(result));\n    }\n  }\n  inputNickname(ev) {\n    this.nickname = ev.target.value;\n  }\n  checkError(result) {\n    if (!result) {\n        alert(\"Api currently not working.\");\n    } else if (result.hasOwnProperty(\"error\")) {\n        alert(result.error);\n    } else {\n        alert(JSON.stringify(result,null,'\\t'));\n    }\n  }\n  render() {\n    let api = this.context;\n    api.user.then((u) => (!this.state.ready) ? this.setState({ready: true, user: u}) : null);\n    if (!this.state.ready) {\n        return \"Loading..\";\n    }\n    if (this.state.user.auth.is_admin) {\n        return (\n          <div className=\"serverpanel\">\n            <input type=\"text\" placeholder=\"Nickname\" onChange={this.inputNickname} />\n            <input type=\"button\" value=\"Ban\" onClick={this.banPlayer} />\n            <input type=\"button\" value=\"Kick\" onClick={this.kickPlayer} />\n            <input type=\"button\" value=\"Give Vip\" onClick={this.giveVip} />\n          </div>\n        )\n    } else {\n        api.openLoginPage();\n        return \"Not an admin.\";\n    }\n  }\n}\n","import logo from './logo.svg';\nimport './App.css';\n\nimport TopBar from \"./TopBar/TopBar.js\";\nimport ServerPanel from \"./ServerPanel/ServerPanel.js\";\n\nimport { OperationsApi, ApiProvider } from \"./api\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n        <TopBar />\n        <OperationsApi.Provider value={new ApiProvider()}>\n            <ServerPanel />\n        </OperationsApi.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}